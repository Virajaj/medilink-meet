<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Medilink Call</title>
    <script src="https://meet.jit.si/external_api.js"></script>

    <style>
      html, body {
        margin: 0;
        height: 100%;
        background: black;
      }
      #jitsi {
        width: 100%;
        height: 100%;
      }
    </style>
  </head>

  <body>
    <div id="jitsi"></div>

    <script>
    const params = new URLSearchParams(window.location.search);
    const room = params.get("room");

    if (!room) {
        document.body.innerHTML =
        "<h2 style='color:white;text-align:center;margin-top:40%'>No room code provided</h2>";
    } else {
        const api = new JitsiMeetExternalAPI("meet.jit.si", {
        roomName: room,
        parentNode: document.querySelector("#jitsi"),
        configOverwrite: {
            prejoinPageEnabled: false,      // skip prejoin
            startWithAudioMuted: false,
            startWithVideoMuted: false,
        },
        interfaceConfigOverwrite: {
            SHOW_JITSI_WATERMARK: false,
            SHOW_WATERMARK_FOR_GUESTS: false,
            TOOLBAR_BUTTONS: [
            "microphone",
            "camera",
            "hangup",
            "chat",
            "tileview",
            ],
        },
        });

        // Make the first user moderator automatically
        api.addEventListener("videoConferenceJoined", () => {
        api.executeCommand("toggleLobby", false); // optional: disable lobby
        });
    }
    </script>
  </body>
</html>
